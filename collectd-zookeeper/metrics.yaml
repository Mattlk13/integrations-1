counter.zk_packets_received:
  brief: Count of the number of ZooKeeper packets received by a server
  description: '> How many ZooKeeper packets have been received by a ZooKeeper server.

    Use this metric to see how many packets are being received by a ZooKeeper server.

    If the value of this metric on one server differs significantly from other servers:

    * There might be a connection imbalance. Check the gauge.zk_num_alive_connections
    metric for this server to see if it also differs significantly from other servers.

    * There might be an unbalanced number of requests being sent to this server. This
    can happen if clients are not sending the expected number of requests.'
  metric_type: cumulative
  title: ZooKeeper Packets Received

counter.zk_packets_sent:
  brief: Count of the number of ZooKeeper packets sent from a server
  description: '> How many ZooKeeper packets have been sent from a ZooKeeper server.

    Use this metric to see how many packets are being sent from a ZooKeeper server.

    If this metric is significantly different than other servers:

    * There might be a connection imbalance. Check the gauge.zk_num_alive_connections
    metric for this server to see if it also differs significantly from other servers.

    * There might be an unbalanced number of requests being sent to this server. Check
    the gauge.zk_packets_received metric for this server to see if it also differs
    significantly from other servers.'
  metric_type: cumulative
  title: ZooKeeper Packets Sent

gauge.zk_approximate_data_size:
  brief: Size of data in bytes that a ZooKeeper server has in its data tree
  description: '> The size in bytes of the data tree for a ZooKeeper server

    Use this metric to keep track of the size of the data tree on a ZooKeeper server.

    Any unexpected changes maybe caused by:

    * A client writing or deleting data.

    * A client disconnecting and ephemeral nodes being deleted as a result. Check
    to see if the gauge.zk_num_alive_connections metric for this server is also changing
    unexpected.'
  metric_type: gauge
  title: Size of Data

gauge.zk_avg_latency:
  brief: Average time in milliseconds for requests to be processed
  description: '> How long on average it takes for this ZooKeeper server to process
    a request in milliseconds. This is

    measured since the last restart of the ZooKeeper server.

    If this metric is continuously rising then one of the following may be true:

    * There may be too many requests being sent to this server for its CPU capacity.
    Make sure there is enough CPU capacity for the ZooKeeper Server on the server.

    * This server may be having an issue connecting to other ZooKeeper servers. Look
    at logs on the server to see if they contain exceptions.'
  metric_type: gauge
  title: Average Request Latency

gauge.zk_ephemerals_count:
  brief: Number of ephemeral nodes that a ZooKeeper server has in its data tree
  description: '> The number of unique ephemeral z-nodes on a ZooKeeper server.

    Use this metric to keep track of the number of ephemeral z-nodes on a ZooKeeper
    server.

    Any unexpected changes may be caused by:

    * A client deleting or creating new ephemeral nodes.

    * A client disconnecting and ephemeral nodes being deleted as a result. Check
    to see if the gauge.zk_num_alive_connections.md metric for this server is decreasing
    unexpectedly.'
  metric_type: gauge
  title: Number of Ephemeral Z-Nodes

gauge.zk_max_file_descriptor_count:
  brief: Maximum number of file descriptors that a ZooKeeper server can open
  description: '> The maximum number of file descriptors a ZooKeeper server can open.

    Compare this metric to gauge.zk_open_file_descriptor_count to keep track of file
    descriptor capacity in a ZooKeeper process.'
  metric_type: gauge
  title: Maximum Number of Open File Descriptors

gauge.zk_max_latency:
  brief: Maximum time in milliseconds for a request to be processed
  description: '> The maximum time it took this ZooKeeper server to process a request
    in milliseconds. This is measured

    since the last restart of the ZooKeeper server.

    If this metric is rising then one of the following may be true:

    * There may be too many requests being sent to this server for its CPU capacity.
    Make sure there is enough CPU capacity for the ZooKeeper server on the server.

    * This server may be unable to connect to other ZooKeeper servers. Look at logs
    on the server to see if they contain exceptions.'
  metric_type: gauge
  title: Maximum Request Latency

gauge.zk_min_latency:
  brief: Minimum time in milliseconds for a request to be processed
  description: '> The minimum time it took this ZooKeeper server to process a request
    in milliseconds. This is measured since the last restart of this ZooKeeper server.

    If this metric is rising then one of the following may be true:

    * There may be too many requests being sent to this server for its CPU capacity.
    Make sure there is enough CPU capacity for the ZooKeeper Server on the server.

    * This server may be unable to connect to other ZooKeeper servers. Look at logs
    on the server to see if they contain exceptions.'
  metric_type: gauge
  title: Minimum Request Latency

gauge.zk_num_alive_connections:
  brief: Number of active clients connected to a ZooKeeper server
  description: '> The number of active clients connected to a ZooKeeper server.

    An active client is one that is sending in regular heartbeat messages.

    Use this metric to keep track of the number of clients on a ZooKeeper server.

    For example, this metric will show you if one server in a ZooKeeper cluster has
    more clients than the others.

    Any unexpected changes may be caused by:

    * Networking issues such as dropped packets or large network latency.

    * Clients disconnecting or reconnecting.'
  metric_type: gauge
  title: Number of Active Clients

gauge.zk_open_file_descriptor_count:
  brief: Number of file descriptors that a ZooKeeper server has open
  description: '> The number of file descriptors a ZooKeeper server has open.

    Use this metric to keep track of open file descriptors in a ZooKeeper process.

    If this number is too high then ZooKeeper will stop accepting connections from
    clients.

    Compare this metric to gauge.zk_max_file_descriptor_count to figure out how close
    you are to file descriptor capacity.

    File descriptor counts grow with:

    * The number of clients connected

    * The number of data files on disk'
  metric_type: gauge
  title: Number of Open File Descriptors

gauge.zk_outstanding_requests:
  brief: Number of currently executing requests
  description: '> The instantaneous number of requests on a ZooKeeper server that
    have started but have not finished yet.

    If this metric is climbing:

    * There may be too many requests being sent to this server for its CPU capacity.
    Check CPU capacity on your ZooKeeper cluster and make sure that this server is
    not receiving a disproportionate number of requests relative to other servers.

    * This server may be unable to connect to other ZooKeeper servers. Look at logs
    on the server to see if they contain exceptions.'
  metric_type: gauge
  title: Outstanding requests

gauge.zk_watch_count:
  brief: Number of watches placed on Z-Nodes on a ZooKeeper server
  description: '> The number of watches on z-nodes on a ZooKeeper server.

    Use this metric to keep track of the number of z-node watches on a ZooKeeper server.

    Any unexpected changes may be caused by:

    * A client creating or deleting new watches. Check that clients are not acting
    unexpectedly.

    * A client disconnecting. This will remove that client''s watches. Confirm this
    by checking the gauge.zk_num_alive_connections metric for this server.'
  metric_type: gauge
  title: Number of Watches

gauge.zk_znode_count:
  brief: Number of z-nodes that a ZooKeeper server has in its data tree
  description: '> The number of unique z-nodes on a ZooKeeper server has in it''s
    data tree

    Use this metric to keep track of the number of z-nodes on a ZooKeeper server.

    Any unexpected changes may be caused by:

    * A client deleting or creating new nodes. Check that clients are not acting unexpectedly.

    * A client disconnecting and ephemeral nodes being deleted. Check to see if the
    gauge.zk_ephemerals_count for this server has decreased unexpectedly.'
  metric_type: gauge
  title: Number of Z-Nodes

